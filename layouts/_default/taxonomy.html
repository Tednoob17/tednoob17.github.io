{{ define "main" }}
  <header class="content__header posts-header">
    <h1 class="posts-title">{{ .Title | markdownify }}</h1>
    {{ .Content }}
  </header>

  <div class="posts-cards">
    {{ range $index, $page := .Pages.ByDate.Reverse }}
      {{ $image := $page.Params.banner | default $page.Params.image | default $page.Params.cover }}
      {{ $summary := $page.Params.description | default ($page.Summary | plainify) }}
      <div class="post-card {{ if modBool $index 2 }}post-card--reverse{{ end }}">
        <a class="post-card__link" href="{{ $page.RelPermalink }}">
          <div class="post-card__frame">
            {{ if $image }}
              <div class="post-card__media">
                <img src="{{ $image | absURL }}" alt="{{ $page.Title | plainify }} cover" loading="lazy" />
              </div>
            {{ end }}
            <div class="post-card__body">
              <div class="post-card__title">{{ $page.Title | markdownify }}</div>
              {{ if $summary }}
                <div class="post-card__excerpt">{{ $summary }}</div>
              {{ end }}
              {{ with $page.Params.tags }}
                <div class="post-card__tags">
                  {{ range . }}
                    {{ $tagUrl := printf "/tags/%s/" (urlize .) }}
                    <a class="post-card__tag" href="{{ $tagUrl | relURL }}">{{ . }}</a>
                  {{ end }}
                </div>
              {{ end }}
            </div>
          </div>
        </a>
      </div>
    {{ end }}
  </div>
{{ end }}

{{ define "aside" }}
  {{ if .Params.description }}<p>{{ .Params.description }}</p>{{ end }}
{{ end }}
