{{ with .Site.Params.about }}
<div class="aside__about">
    {{ with .logo }}<span class="about__logo" role="img">{{ . }}</span>&nbsp;{{ end }}
    {{ with .logo_image }}<img class="about__logo" src="{{ . | absURL }}" alt="Logo">{{ end }}
<h1 class="about__title">{{ .title }}</h1>
{{ with .description }}<p class="about__description">{{ . | markdownify }}</p>{{ end }}
</div>
{{ end }}

<ul class="aside__social-links">
    {{ range $item := .Site.Params.socialLinks }}
    <li>
        <a href="{{ $item.url }}" rel="me" aria-label="{{ $item.title }}" title="{{ $item.title }}"><i class="{{ $item.icon }}" aria-hidden="true"></i></a>&nbsp;
    </li>
    {{ end }}
</ul>

<div class="aside__carousel" style="margin-top: 30px; text-align: center;">
    <h3 style="margin-bottom: 15px; font-size: 1rem; font-weight: bold;">A Rap / Classic Album that i ❤️</h3>
    <div class="carousel-container" style="position: relative; width: 100%; max-width: 250px; aspect-ratio: 1/1; margin: 0 auto; overflow: hidden; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.3);">
        {{ $path := "static/images/Zushiboyz Merch" }}
        {{ $files := readDir $path }}
        {{ range $files }}
            {{ if findRE `(?i)\.(jpg|jpeg|png|webp|avif)$` .Name }}
            <div class="carousel-item" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; transition: opacity 1s ease-in-out;">
                <img src="{{ printf "images/Zushiboyz Merch/%s" .Name | relURL }}" 
                     alt="{{ .Name }}" 
                     style="width: 100%; height: 100%; object-fit: cover;">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; background: rgba(0, 0, 0, 0.6); color: #fff; padding: 8px 5px; text-align: center; font-size: 0.9rem; font-weight: bold;">
                    {{ replaceRE "\\.[^.]+$" "" .Name }}
                </div>
            </div>
            {{ end }}
        {{ end }}
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const items = document.querySelectorAll('.carousel-item');
        let currentIndex = 0;
        
        if (items.length > 0) {
            // Randomly select start index
            currentIndex = Math.floor(Math.random() * items.length);
            items[currentIndex].style.opacity = '1';
            
            setInterval(() => {
                items[currentIndex].style.opacity = '0';
                currentIndex = (currentIndex + 1) % items.length;
                items[currentIndex].style.opacity = '1';
            }, 3000);
        }
    });
</script>
